webpackJsonp([11],{Ie0b:function(e,t){},Ssoz:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Dd8w"),i=r.n(a),o=r("Xxa5"),n=r.n(o),s=r("exGp"),c=r.n(s),l=r("fZjL"),m=r.n(l),u=r("mvHQ"),p=r.n(u),d=r("O4Lo"),h=r.n(d),f=r("t6e8"),v={components:{},props:{resetBtnStyle:{type:Object,default:function(){}},external:{type:Boolean,default:!1},deviceId:{type:String,default:""},companyId:{type:String,default:""}},data:function(){return{pageInfo:{current:1,size:10},tableTotal:0,tableData:[],searchForm:{recordName:"",status:[],createUserName:"",updateUserName:"",createTime:"",createTimeStart:"",createTimeEnd:"",updateTime:"",updateTimeStart:"",updateTimeEnd:""}}},created:function(){this.getFormList()},methods:{viewHistoryRecord:function(e){var t={formName:e.formName,formId:e.id,external:this.external};this.companyId&&(t.companyId=this.companyId),this.deviceId&&(t.deviceId=this.deviceId),this.$router.push({name:"formHistoryRecord",query:t})},changeSearch:h()(function(){this.pageInfo={current:1,size:10},this.$gio.ClickSearchRecordSheet(),this.getFormList({searchKey:this.searchForm.recordName})},800),headerCellStyle:function(){return{"box-sizeing":"border-box",background:"#f7f7f7"}},handleHeaderdragend:function(e,t,r,a){e<110&&(r.width=110,r.realWidth=110),""==r.label?(r.width=t,r.realWidth=t):e>300&&""!=r.label&&(r.width=300,r.realWidth=300)},CELLStyle:function(){return{border:"1px solid #fff"}},searchFilter:function(){this.searchForm.createTime.length&&(this.searchForm.createTimeStart=Vue.prototype.moment(this.searchForm.createTime[0]).format("YYYY-MM-DD"),this.searchForm.createTimeEnd=Vue.prototype.moment(this.searchForm.createTime[1]).format("YYYY-MM-DD")),this.searchForm.updateTime.length&&(this.searchForm.updateTimeStart=Vue.prototype.moment(this.searchForm.updateTime[0]).format("YYYY-MM-DD"),this.searchForm.updateTimeEnd=Vue.prototype.moment(this.searchForm.updateTime[1]).format("YYYY-MM-DD"));var e=JSON.parse(p()(this.searchForm));delete e.createTime,delete e.updateTime,e.status=e.status.join(",");var t={};m()(e).forEach(function(r){e[r]&&(t[r]=e[r])}),this.getFormList(t)},clearFilter:function(e){"status"==e?this.searchForm.status=[]:this.searchForm[e]="","createTime"==e?(this.searchForm.createTimeStart="",this.searchForm.createTimeEnd=""):"updateTime"==e&&(this.searchForm.updateTimeStart="",this.searchForm.updateTimeEnd=""),this.searchFilter()},resetFormList:function(){this.getFormList()},resetTable:function(){this.searchForm={recordName:"",status:[],createUserName:"",updateUserName:"",createTime:"",createTimeStart:"",createTimeEnd:"",updateTime:"",updateTimeStart:"",updateTimeEnd:""},this.pageInfo={current:1,size:10},this.getFormList()},createForm:function(){this.$router.push({name:"formCreate"}),this.$gio.ClickNewRecordTable()},editFormTemplate:function(e){e.eidtFlag=!0,this.$router.push({name:"formCreate",query:{formData:p()(e)}}),this.$gio.RecordformClickEdit()},deleteFormTemplate:function(e){var t=this;return c()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(f.b)({id:e.id},function(){return t.$router.replace({name:"formHistoryRecord",query:{formName:e.formName,formId:e.id}})},function(){return t.resetFormList()});case 2:r.sent,t.$gio.ClickDelete();case 4:case"end":return r.stop()}},r,t)}))()},handleSizeChange:function(e){this.pageInfo.size=e,this.getFormList()},handleCurrentChange:function(e){this.pageInfo.current=e,this.getFormList()},getFormList:function(e){var t=this;return c()(n.a.mark(function r(){var a,o;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(a=i()({},t.pageInfo,e,{menuCode:"form_manage"})).queryFormConfigFlag=!0,t.deviceId&&(a.deviceId=t.deviceId),t.companyId&&(a.companyId=t.companyId),r.next=6,Object(f.g)(a);case 6:o=r.sent,t.tableData=o.data.data.list,t.tableTotal=o.data.data.totalCount;case 9:case"end":return r.stop()}},r,t)}))()}}},y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-template-lsit-container"},[e.external?e._e():r("el-button",{staticClass:"config-btn",attrs:{type:"danger",size:"mini"},on:{click:e.createForm}},[e._v("新建记录表")]),e._v(" "),r("el-button",{staticClass:"config-btn-reset",style:e.resetBtnStyle?e.resetBtnStyle:{},attrs:{size:"mini"},on:{click:e.resetTable}},[e._v("重置筛选")]),e._v(" "),r("div",{staticClass:"search-bar"},[r("el-form",{staticStyle:{width:"25%"},attrs:{model:e.searchForm,inline:!0,"label-width":"90px","label-position":"left"}},[r("el-form-item",{attrs:{label:"搜索记录表"}},[r("el-input",{staticStyle:{width:"160%"},attrs:{size:"mini",placeholder:"请输入关键词搜索记录表","prefix-icon":"el-icon-search",clearable:""},on:{input:e.changeSearch},model:{value:e.searchForm.recordName,callback:function(t){e.$set(e.searchForm,"recordName",t)},expression:"searchForm.recordName"}})],1)],1)],1),e._v(" "),r("el-table",{staticClass:"form-template-list",staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:e.tableData,height:"72vh","header-cell-style":e.headerCellStyle,"cell-style":e.CELLStyle},on:{"header-dragend":e.handleHeaderdragend}},[r("el-table-column",{attrs:{prop:"formName",label:"记录表名称","show-overflow-tooltip":""}}),e._v(" "),e.external?e._e():r("el-table-column",{attrs:{prop:"remark",label:"描述","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.remark?r.remark:"暂无")+"\n      ")]}}],null,!1,2637005596)}),e._v(" "),e.external?e._e():r("el-table-column",{attrs:{prop:"status","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("el-popover",{ref:"filterPopover",attrs:{placement:"bottom",width:"200",trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("div",{staticClass:"table-header-inner"},[r("span",[e._v("状态")]),e._v(" "),r("i",{staticClass:"el-icon-sort",staticStyle:{"margin-left":"20px",cursor:"pointer"}})])]},proxy:!0}],null,!1,1773000397)},[e._v(" "),r("div",[r("el-checkbox-group",{staticStyle:{display:"flex","flex-wrap":"wrap"},on:{input:e.changeValue},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[r("el-checkbox",{staticStyle:{width:"100%"},attrs:{label:"1",size:"mini"}},[e._v("启用")]),e._v(" "),r("el-checkbox",{attrs:{label:"0",size:"mini"}},[e._v("禁用")])],1),e._v(" "),r("div",{staticStyle:{"margin-top":"10px",float:"right"}},[r("el-button",{staticStyle:{color:"#000"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.clearFilter("status")}}},[e._v("\n                清空\n              ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.searchFilter}},[e._v("\n                确定\n              ")])],1)],1)])]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.status?"启用":"禁用")+"\n      ")]}}],null,!1,3571777140)}),e._v(" "),e.external?e._e():r("el-table-column",{attrs:{prop:"createUserName","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("el-popover",{ref:"filterPopover",attrs:{placement:"bottom",width:"200",trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("div",{staticClass:"table-header-inner"},[r("span",[e._v("创建人")]),e._v(" "),r("i",{staticClass:"el-icon-search",staticStyle:{"margin-left":"20px",cursor:"pointer"}})])]},proxy:!0}],null,!1,4039295349)},[e._v(" "),r("div",{staticStyle:{cursor:"pointer"}},[r("el-input",{attrs:{size:"mini",placeholder:"请输入"},model:{value:e.searchForm.createUserName,callback:function(t){e.$set(e.searchForm,"createUserName",t)},expression:"searchForm.createUserName"}}),e._v(" "),r("div",{staticStyle:{"margin-top":"10px",float:"right"}},[r("el-button",{staticStyle:{color:"#000"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.clearFilter("createUserName")}}},[e._v("\n                清空\n              ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.searchFilter}},[e._v("\n                确定\n              ")])],1)],1)])]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[e._v("\n        "+e._s(r.createUserName?r.createUserName:"暂无")+"\n      ")]}}],null,!1,7644927)}),e._v(" "),e.external?e._e():r("el-table-column",{attrs:{prop:"createTime","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("el-popover",{ref:"filterPopover",attrs:{placement:"bottom",width:"200",trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("div",{staticClass:"table-header-inner"},[r("span",[e._v("创建时间")]),e._v(" "),r("i",{staticClass:"el-icon-sort",staticStyle:{"margin-left":"20px",cursor:"pointer"}})])]},proxy:!0}],null,!1,875037561)},[e._v(" "),r("div",{staticStyle:{cursor:"pointer"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.searchForm.createTime,callback:function(t){e.$set(e.searchForm,"createTime",t)},expression:"searchForm.createTime"}}),e._v(" "),r("div",{staticStyle:{"margin-top":"10px",float:"right"}},[r("el-button",{staticStyle:{color:"#000"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.clearFilter("createTime")}}},[e._v("\n                清空\n              ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.searchFilter}},[e._v("\n                确定\n              ")])],1)],1)])]},proxy:!0}],null,!1,4152579001)}),e._v(" "),r("el-table-column",{attrs:{prop:"updateUserName","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("el-popover",{ref:"filterPopover",attrs:{placement:"bottom",width:"200",trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("div",{staticClass:"table-header-inner"},[r("span",[e._v("最后编辑人")]),e._v(" "),r("i",{staticClass:"el-icon-search",staticStyle:{"margin-left":"20px",cursor:"pointer"}})])]},proxy:!0}])},[e._v(" "),r("div",{staticStyle:{cursor:"pointer"}},[r("el-input",{attrs:{size:"mini",placeholder:"请输入"},model:{value:e.searchForm.updateUserName,callback:function(t){e.$set(e.searchForm,"updateUserName",t)},expression:"searchForm.updateUserName"}}),e._v(" "),r("div",{staticStyle:{"margin-top":"10px",float:"right"}},[r("el-button",{staticStyle:{color:"#000"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.clearFilter("updateUserName")}}},[e._v("\n                清空\n              ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.searchFilter}},[e._v("\n                确定\n              ")])],1)],1)])]},proxy:!0}])}),e._v(" "),r("el-table-column",{attrs:{prop:"updateTime",label:"最后编辑时间","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(){return[r("el-popover",{ref:"filterPopover",attrs:{placement:"bottom",width:"200",trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("div",{staticClass:"table-header-inner"},[r("span",[e._v("最后编建时间")]),e._v(" "),r("i",{staticClass:"el-icon-sort",staticStyle:{"margin-left":"20px",cursor:"pointer"}})])]},proxy:!0}])},[e._v(" "),r("div",{staticStyle:{cursor:"pointer"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini",type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.searchForm.updateTime,callback:function(t){e.$set(e.searchForm,"updateTime",t)},expression:"searchForm.updateTime"}}),e._v(" "),r("div",{staticStyle:{"margin-top":"10px",float:"right"}},[r("el-button",{staticStyle:{color:"#000"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.clearFilter("updateTime")}}},[e._v("\n                清空\n              ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.searchFilter}},[e._v("\n                确定\n              ")])],1)],1)])]},proxy:!0}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.external?r("el-button",{staticStyle:{color:"#001450"},attrs:{type:"text",size:"mini"},on:{click:function(){return e.viewHistoryRecord(a)}}},[e._v("查看")]):e._e(),e._v(" "),e.external?e._e():r("el-button",{staticStyle:{color:"#001450"},attrs:{type:"text",size:"mini"},on:{click:function(){return e.editFormTemplate(a)}}},[e._v("编辑")]),e._v(" "),e.external?e._e():r("el-button",{staticStyle:{color:"#d10000"},attrs:{type:"text",size:"mini"},on:{click:function(){return e.deleteFormTemplate(a)}}},[e._v(" 删除")])]}}])})],1),e._v(" "),r("el-pagination",{staticStyle:{display:"flex",height:"60px","align-items":"center",background:"#fff","z-index":"999",bottom:"0"},attrs:{"current-page":e.pageInfo.current,"page-sizes":[10,20,30,50],"page-size":e.pageInfo.size,total:e.tableTotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)};y._withStripped=!0;var g={render:y,staticRenderFns:[]},_=g;var b=!1;var F=r("VU/8")(v,_,!1,function(e){b||r("Ie0b")},"data-v-6a8c6cb2",null);F.options.__file="src/components/formApplication/formTemplateList/index.vue";t.default=F.exports}});