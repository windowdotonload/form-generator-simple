webpackJsonp([10],{O5Gu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("Xxa5"),n=i.n(l),s=i("exGp"),a=i.n(s),r=i("efop"),o={components:{UploadFileList:function(){return i.e(15).then(i.bind(null,"4fvB"))}},model:{prop:"propFileList",event:"changeFileList"},props:{accept:{type:String,default:".pdf,.ppt,.pptx"},propFileList:{type:Array,default:[]},fileType:{type:String,default:""},uploadBtnText:{type:String,default:"上传文件"},limit:{type:Number,default:1},fileSizeLimit:{type:Number,default:50},multiple:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},useSlot:{type:Boolean,default:!1},previewAble:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},created:function(){var e=this;return a()(n.a.mark(function t(){var i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.propFileList&&0!=e.propFileList.length){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.loadingAssets=!0,t.next=6,Object(r.b)(e.propFileList);case 6:i=t.sent,e.fileList=i,e.previewSrcList=e.fileList.map(function(e){return e.url}),e.$emit("changeFileList",e.fileList);case 10:return t.prev=10,e.loadingAssets=!1,t.finish(10);case 13:case"end":return t.stop()}},t,e,[[2,,10,13]])}))()},data:function(){return{loadingAssets:!1,fileList:[]}},methods:{ossUpload:function(e){var t=this;return a()(n.a.mark(function i(){var l,s,a,o;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(l=e.file.name.split(".")[e.file.name.split(".").length-1],t.accept.split(",").some(function(e){return e.includes(l)})){i.next=4;break}return i.abrupt("return",t.$message({type:"warning",message:"请选择 "+t.accept+" 格式的文件"}));case 4:if(e.file.size/1024/1024<t.fileSizeLimit){i.next=9;break}return t.$message({type:"error",message:"请选择"+t.fileSizeLimit+"M以内的文件"}),t.$refs.uploadImg.abort(),i.abrupt("return");case 9:return i.prev=9,s=window.URL.createObjectURL(e.file),a={name:e.file.name,url:s,halfPath:"",_uid:(new Date).getTime(),__fileraw:e},i.next=14,Object(r.c)(e.file,e.file.name,t.fileType);case 14:o=i.sent,a.halfPath=o.name,t.fileList.push(a),t.$emit("changeFileList",t.fileList),i.next=23;break;case 20:i.prev=20,i.t0=i.catch(9),console.log("ERR",i.t0);case 23:case"end":return i.stop()}},i,t,[[9,20]])}))()},deleteVideo:function(){this.fileList=[]},deleteFileListItem:function(e){var t=this.fileList.findIndex(function(t){return t._uid==e._uid});this.fileList.splice(t,1),this.previewSrcList=this.fileList.map(function(e){return e.url}),this.$emit("changeFileList",this.fileList)}}},p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingAssets,expression:"loadingAssets"}],staticClass:"uploadVideo-container"},[i("el-upload",{ref:"uploadVideo",attrs:{multiple:e.multiple,disabled:e.fileList.length==e.limit||e.disabled,accept:e.accept,"file-list":e.fileList,action:"",limit:e.limit,"http-request":e.ossUpload,"show-file-list":!1},scopedSlots:e._u([{key:"trigger",fn:function(){return[e.useSlot?e._e():i("el-button",{attrs:{size:"mini",type:"danger",disabled:e.fileList.length==e.limit||e.disabled}},[e._v(e._s(e.uploadBtnText))]),e._v(" "),e.useSlot?e._t("uplaodBtn"):e._e()]},proxy:!0}],null,!0)}),e._v(" "),i("UploadFileList",{attrs:{fileList:e.fileList,previewAble:e.previewAble},on:{deleteFileListItem:e.deleteFileListItem}})],1)};p._withStripped=!0;var u={render:p,staticRenderFns:[]},f=u;var d=!1;var c=i("VU/8")(o,f,!1,function(e){d||i("k/kd")},"data-v-7013a2b4",null);c.options.__file="src/generalComponents/OSSUpload/uploadFile.vue";t.default=c.exports},"k/kd":function(e,t){}});