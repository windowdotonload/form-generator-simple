webpackJsonp([9],{OXmR:function(e,i){},"RI/t":function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=t("Xxa5"),s=t.n(l),a=t("exGp"),n=t.n(a),r=t("efop"),o={components:{UploadFileList:function(){return t.e(15).then(t.bind(null,"4fvB"))}},model:{prop:"propFileList",event:"changeFileList"},props:{accept:{type:String,default:".mp4"},controls:{type:Boolean,default:!0},propFileList:{type:Array,default:[]},width:{type:[String,Number]},height:{type:[String,Number]},limit:{type:Number,default:1},fileType:{type:String,default:""},fileSizeLimit:{type:Number,default:300},multiple:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},created:function(){var e=this;return n()(s.a.mark(function i(){var t;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e.propFileList&&0!=e.propFileList.length){i.next=2;break}return i.abrupt("return");case 2:return i.prev=2,e.loadingAssets=!0,i.next=6,Object(r.b)(e.propFileList);case 6:t=i.sent,e.fileList=t,e.$emit("changeFileList",e.fileList);case 9:return i.prev=9,e.loadingAssets=!1,i.finish(9);case 12:case"end":return i.stop()}},i,e,[[2,,9,12]])}))()},data:function(){return{loadingAssets:!1,fileList:[],readOnlyVideoBox:!1}},methods:{playReadonlyVideo:function(){this.readOnlyVideoBox=!0},handleCloseDialogVideoBox:function(){this.$refs.dialogVideo.pause(),this.readOnlyVideoBox=!1},ossUpload:function(e){var i=this;return n()(s.a.mark(function t(){var l,a,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l=e.file.name.split(".")[e.file.name.split(".").length-1],i.accept.split(",").some(function(e){return e.includes(l)})){t.next=4;break}return t.abrupt("return",i.$message({type:"warning",message:"请选择 "+i.accept+" 格式的文件"}));case 4:if(e.file.size/1024/1024<i.fileSizeLimit){t.next=9;break}return i.$message({type:"error",message:"请选择"+i.fileSizeLimit+"M以内的文件"}),i.$refs.uploadImg.abort(),t.abrupt("return");case 9:try{a=window.URL.createObjectURL(e.file),(o=document.createElement("video")).src=a,o.addEventListener("loadedmetadata",n()(s.a.mark(function t(){var l,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l={videoWidth:o.videoWidth,videoHeight:o.videoHeight,name:e.file.name,url:a,halfPath:"",_uid:(new Date).getTime(),__fileraw:e},i.fileList.push(l),t.next=4,Object(r.c)(e.file,e.file.name,i.fileType);case 4:n=t.sent,l.halfPath=n.name,i.$emit("changeFileList",i.fileList);case 7:case"end":return t.stop()}},t,i)})))}catch(e){console.log("ERR",e)}case 10:case"end":return t.stop()}},t,i)}))()},deleteVideo:function(){this.fileList=[],this.$emit("changeFileList",this.fileList)},deleteFileListItem:function(e){var i=this.fileList.findIndex(function(i){return i._uid==e._uid});this.fileList.splice(i,1),this.previewSrcList=this.fileList.map(function(e){return e.url}),this.$emit("changeFileList",this.fileList)}}},d=function(){var e=this,i=e.$createElement,l=e._self._c||i;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingAssets,expression:"loadingAssets"}],staticClass:"uploadVideo-container"},[1==e.limit?l("div",{staticClass:"uploadVideo-preview"},[1==e.fileList.length&&e.fileList[0].url?l("div",{staticClass:"uploadVideo-preview-single",class:e.readOnly?"video-single-readonly":""},[l("div",{staticClass:"uploadVideo-player-box",style:{width:e.width,height:e.height}},[l("video",{staticClass:"uploadVideo-player",attrs:{src:e.fileList[0].url,controls:!e.readOnly&&e.controls}}),e._v(" "),e.readOnly?l("div",{staticClass:"video-readonly-mask",on:{click:e.playReadonlyVideo}},[l("img",{attrs:{src:t("d8XM"),alt:""}})]):e._e()]),e._v(" "),e.readOnly?e._e():l("i",{staticClass:"el-icon-circle-close close-icon close-icon-hover",on:{click:e.deleteVideo}})]):e._e()]):e._e(),e._v(" "),1!=e.limit||e.readOnly?e._e():l("el-upload",{directives:[{name:"show",rawName:"v-show",value:e.fileList.length<e.limit,expression:"fileList.length < limit"}],ref:"uploadVideo",attrs:{multiple:e.multiple,accept:e.accept,"file-list":e.fileList,action:"",limit:e.limit,"http-request":e.ossUpload,"show-file-list":!1},scopedSlots:e._u([{key:"trigger",fn:function(){return[l("div",{staticClass:"el-upload el-upload--picture-card custome-upload-box"},[l("i",{staticClass:"el-icon-plus"})])]},proxy:!0}],null,!1,19142520)}),e._v(" "),e.limit>1?l("el-upload",{ref:"uploadVideo",attrs:{multiple:e.multiple,disabled:e.fileList.length==e.limit&&!e.readOnly,accept:e.accept,"file-list":e.fileList,action:"",limit:e.limit,"http-request":e.ossUpload,"show-file-list":!1},scopedSlots:e._u([{key:"trigger",fn:function(){return[l("el-button",{attrs:{size:"mini",type:"danger",disabled:e.fileList.length==e.limit}},[e._v("上传视频")])]},proxy:!0}],null,!1,3248740967)}):e._e(),e._v(" "),e.limit>1?l("UploadFileList",{attrs:{fileList:e.fileList},on:{deleteFileListItem:e.deleteFileListItem}}):e._e(),e._v(" "),e.readOnly&&1==e.fileList.length&&e.fileList[0].url?l("el-dialog",{attrs:{visible:e.readOnlyVideoBox,width:"50%","before-close":e.handleCloseDialogVideoBox},on:{"update:visible":function(i){e.readOnlyVideoBox=i}}},[l("video",{ref:"dialogVideo",staticClass:"uploadVideo-player-dialog",attrs:{src:e.fileList[0].url,controls:""}})]):e._e()],1)};d._withStripped=!0;var A={render:d,staticRenderFns:[]},u=A;var c=!1;var p=t("VU/8")(o,u,!1,function(e){c||t("OXmR")},"data-v-5150017e",null);p.options.__file="src/generalComponents/OSSUpload/uploadVideo.vue";i.default=p.exports},d8XM:function(e,i){e.exports="data:image/png;base64,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4b02rsn0mDx79my0tbV1XMElhMRFJiZv3ryZ2rBhQ77f789XGWD56kzk+fPn0wquISSuisfjP3V1dU2XlJSoqqqqtH54lbmi1NzcHOnv7+fJZ26aytG/lOvVpOAs8/GXJ0+erAwGg0Uqhczl3ba2tpH29vYvCi4bYCLJAmarY6aTRU1HxZvssxMTkO7u7nE9hXz+8OGDU28sxP/FRJKN6urqfPv27QskekIx70bW25cZc4McHyeRVQYISRYzW56amprCUChUVFlZ6fN6vaueVMz5x9DQUExPHjHevZu1CAn+Z/Pmzd5AIODRUfHqqz15Zgu0sg1aWFhYMksf4v5bh2NhcnIyrqePeSYPKEICIAEGuEUegBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASBGSACIERIAYoQEgBghASCWo5dPr2oFAN9n8j9vFsQ8PnI6fQAAAABJRU5ErkJggg=="}});